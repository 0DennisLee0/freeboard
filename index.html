<!DOCTYPE html>
<html>
<head>
    <title>deccoboard</title>
    <meta name="viewport" content="width=1024"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="viewport" content = "width = device-width, initial-scale = 1, user-scalable = no" />
    <!-- Bootstrap -->
    <!--<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">-->
    <link href="css/jquery.gridster.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
    <script src="js/head.js"></script>
    <script type="text/javascript">
        head.js("js/knockout.js",
                "js/knockout.switchcase.js",
                "js/jquery.js",
                "js/underscore.js",
                "js/jquery.gridster.js",
                "js/jquery.sparkline.min.js",
                "js/raphael.2.1.0.min.js",
                "js/justgage.1.0.1.min.js",
                "js/deccoboard.js",
                "config.js",
                function (){

                });
    </script>
</head>
<body>
<header id="main-header">
    <div id="admin-bar">
        <div id="admin-menu">
            <div id="board-tools">
                <h1>DECCOBOARD</h1>
                <button class="btn btn-inverse" type="button" data-bind="click: createWidget"><i class="icon-plus icon-white"></i> Add Widget</button>
            </div>
            <div id="datasources">
                <h1 class="small-text">DATASOURCES</h1>
                <a href="javascript:void(0)" data-bind="crud: {template: 'datasource-edit-template', operation: 'add', model: 'DatasourceModel'}">Add</a>
                <table class="table table-condensed" id="datasources-list">
                    <thead>
                    <tr>
                        <th>Name</th>
                        <th>Last Updated</th>
                        <th>&nbsp;</th>
                    </tr>
                    </thead>
                    <tbody data-bind="foreach: datasources">
                        <tr>
                            <td><a href="#edit-datasource" data-bind="text: name, crud: {template: 'datasource-edit-template', operation: 'edit', model: 'DatasourceModel'}"></a></td>
                            <td data-bind="text: last_updated"></td>
                            <td><a href="#delete-datasource" class="datasource-delete-btn" data-bind="crud: {template: 'datasource-delete-template', operation: 'delete', model: 'DatasourceModel'}"><i class="icon-trash icon-white"></i></a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <a id="toggle-header" href="#" class="" style="bottom: 0px;"></a>
</header>
<div class="gridster">
    <ul data-bind="grid: true, template: {name: 'widget-template', foreach: widgets}">
    </ul>
</div>

<div id="crud-dialog" class="modal">
    <div data-bind="template: { name: currentCRUDTemplate, data: currentCRUDObject }"></div>
</div>

<script type="text/html" id="widget-template">
    <li data-bind="widget: true">
        <header>
            <h1 data-bind="text: title"></h1>
            <div class="widget-tools">
                <i class="icon-wrench icon-white edit-widget"></i><a href="javascript:void(0);" data-bind="crud: {template: 'widget-delete-template', operation: 'delete', model: 'WidgetModel'}"><i class="icon-trash icon-white delete-widget"></i></a>
            </div>
        </header>
        <section data-bind="foreach: sections">
            <div class="sub-section">
                <h2 data-bind="text: title"></h2>
                <!-- ko switch: type -->
                <!-- ko case: $default -->
                <span data-bind="html:computedValue, attr:{id:'section-' + sectionID + '-value'}"></span>
                <span data-bind="text: units"></span>
                <!-- /ko -->
                <!-- ko case: "big-text" -->
                <span class="big-text" data-bind="html:computedValue, attr:{id:'section-' + sectionID + '-value'}"></span>
                <span data-bind="text: units"></span>
                <!-- /ko -->
                <!-- ko case: "sparkline" -->
                <div class="sparkline" data-bind="attr:{id:'section-' + sectionID + '-sparkline'}"></div>
                <!-- /ko -->
                <!-- ko case: ["medium-text", "text-with-sparkline"] -->
                <span class="medium-text" data-bind="html:computedValue, attr:{id:'section-' + sectionID + '-value'}"></span>
                <span data-bind="text: units"></span>
                <!-- ko if: type() == "text-with-sparkline" -->
                <span class="sparkline-inline" data-bind="attr:{id:'section-' + sectionID + '-sparkline'}"></span>
                <!-- /ko -->
                <!-- /ko -->
                <!-- /ko -->
                <div data-bind="valueScript: true"></div>
                <!--<script type="text/javascript" data-bind="text: valueScript"></script>-->
                </div>
        </section>
    </li>
</script>

<!-- Modal CRUD templates --->

<script type="text/html" id="empty-crud-template">
</script>

<script type="text/html" id="datasource-edit-template">
    <header>
        <h1>Datasource</h1>
    </header>
    <section>
        <form>
            <div class="control-group">
                <label class="control-label" for="datasourceName">Name</label>

                <div class="controls">
                    <input type="text" id="datasourceName" data-bind="value: name">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="datasourceUrl">Url</label>

                <div class="controls">
                    <input type="text" id="datasourceUrl" data-bind="value: url">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="datasourceType">Type</label>

                <div class="controls">
                    <select id="datasourceType" data-bind="options: $root.datasourceTypes, value: type">
                    </select>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="datasourceRefresh">Refresh Every</label>
                <div class="controls">
                    <input type="text" class="small align-right" id="datasourceRefresh" data-bind="value: refresh">
                    <div class="input-suffix">seconds</div>
                </div>
            </div>
        </form>
    </section>
    <footer>
        <a href="javascript:void(0);" class="button modal_close" data-bind="click: $root.commitCurrentCRUD">Save</a>
        <a href="javascript:void(0);" class="button modal_close" data-bind="click: $root.cancelCurrentCRUD">Cancel</a>
    </footer>
</script>

<script type="text/html" id="datasource-delete-template">
    <header>
        <h1>Delete Datasource</h1>
    </header>
    <section>
        Are you sure you want to delete this datasource?
    </section>
    <footer>
        <a href="javascript:void(0);" class="button modal_close" data-bind="click: $root.commitCurrentCRUD">OK</a>
        <a href="javascript:void(0);" class="button modal_close" data-bind="click: $root.cancelCurrentCRUD">Cancel</a>
    </footer>
</script>

<script type="text/html" id="widget-delete-template">
    <header>
        <h1>Delete Widget</h1>
    </header>
    <section>
        Are you sure you want to delete this widget?
    </section>
    <footer>
        <a href="javascript:void(0);" class="button modal_close" data-bind="click: $root.commitCurrentCRUD">OK</a>
        <a href="javascript:void(0);" class="button modal_close" data-bind="click: $root.cancelCurrentCRUD">Cancel</a>
    </footer>
</script>

</body>
</html>